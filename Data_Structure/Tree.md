# 5. Tree

# 트리란?

이전의 자료구조는 선형 구조의 모습을 하고 있으나, 이제부터는 비선형, 계층형 구조에 대해서 배워볼것임.

트리는 계층 구조이다.

### 트리의 종류

- 이진트리
- 표현 트리
- 허프만 트리
- 이진검색트리

## 트리의 순회 (Tree Traversals)

트리는 순회하는 방식은 총 3가지로 축약할 수 있다. 

1. 전위 순회 (Preorder) : Root → 좌 → 우 순으로 순회

    **일단 방문 먼저하고 왼쪽으로 가거나(없어서) 오른쪽 순으로 가는 방식**

    알고리즘 방식

    트리가 비었으면 `Return`

    아니면

    루트 방문

    좌 서브 트리 순회

    우 서브 트리 순회

2. 중위 순회 (Inorder): 좌 → Root → 우 순으로 순회 

    **왼쪽으로 갈수 있을 만큼  최대한 가다가 서브 트리가 없으면 그 노드 방문 후 오른쪽으로 이동하고 반복.**

    트리가 비었으면 `Return`

    아니면

    좌 서브 트리 순회

    루트 방문

    우 서브 트리 순회

3. 후위 순회 (Postorder): 좌→우→Root순으로 순회

    **왼쪽으로 갈수 있을 만큼  최대한 가다가 서브 트리가 없으면 오른쪽 한번 갔다가 다시 반복. (방문은 그 서브 트리가 없어서, 더이상 갈 곳이 없는 경우 방문한다.)**

    트리가 비었으면 `Return`

    아니면

    좌 서브 트리 순회

    우 서브 트리 순회

    루트 방문

## 이진 트리에 대해서

이진 트리의 경우 실제로 자바에서 이 클래스가 구현되어 있지 않다.  그래서 직접 실 구현을 할 필요가 있는데, 어떤 방식으로 구현해야 할지 이 책에서 꽤나 자세히 알려준다.

## 이진 트리 구현

## 이진 탐색 트리

이진 탐색 트리는 다음과 같이 작동한다.

- 트리가 비었는가?
- 트리가 비지 않았으면 Root가 두 개의 서브 트리를 가진다. 좌 트리, 우 트리
    - 단, 다음과 같은 조건을 반드시 일치해야 한다.
    - 노드를 기준으로 **좌측 트리에는 노드보다 작은 값**이. **우측 트리에는 노드보다 큰 값**이 있어야한다.

## 성능

이상적으로 퍼져 있으면, $O(log n)$ 이 나오지만, 한쪽으로 치우쳐진 (한 서브 트리에 몰려 있을 ) 경우는 $O(n)$을 가진다.

## 이진 탐색 트리 구현

- 검색

- 삽입

- 삭제

# 힙과 우선순위 큐

## 힙

힙은 완전한 이진 트리이다. 물론 다음과 같은 특징을 가진다

- 트리에서 가장 작은 것이 Root다
- 모든 서브트리가 힙으로 이루어져 있다. → 그래서 한 트리 내에서 비교해서 모양새가 만들어지면 된다.

## 힙의 작동 방식

힙의 작동 방식은 다음과 같은 알고리즘으로 각 메소드 별로 정의가 가능하다.

- 삽입
    1. 힙 가장 아래쪽의 다음 삽입 위치에 일단 그 값을 삽입함.
    2. 새로운 아이템이 root가 아니고, 새로운 아이템이 그것의 부모보다 작을때만 반복.
        1. 부모와 새로운 삽입 값을 바꿈.  무조건 새로운 삽입 값을 트리의 root로 올려버림
- 삭제
    1. 일단 루트에서 삭제 해야 하는 값을 지우고 루트에서 **가장 마지막에 들어간 값**인 것을 그 삭제된 위치에 넣는다. (LIH)
    2.  **이 가장 마지막에 들어간 값이 자식을 가지고 있고 이 가장 마지막에 들어간 값이 이 자식들보다 크면 반복한다**
        1. **가장 마지막에 들어간 값과 자식중에 가장 작은 값을 가진 자식의** 위치와 바꾸고 **가장 마지막에 들어간 값은** 힙 아래로 내린다.

## 우선순위 큐

우선순위 큐도 결국에는 힙의 일종인데  자바에서는 이 우선순위 큐가 그 Heap의 효율적인 구현을 위한 기반이다.

이런 힙의 삽입 삭제의 시간 복잡도는 $O(logn)$ 이다.

우선 순위 큐에서는 가장 큰 우선순위를 "가장 작은 값을 바탕"으로 만들어진다. 힙에서 가장 작은 숫자가 Root에 있는 것 처럼.

그래서 우선 순위 큐에서는 비교에 의한 우선순위를 두게 되는데 그 비교를 위한 java에서는 Comparator를 이용해서 그 비교를 하게 된다. 

**실제로 꿀 팁:** 
우선 순위 큐의 기본 비교 방식은 숫자이다. 숫자에서도 힙과 같이 가장 작은 수를 가장 큰 우선 순위로 가지게 된다. 그리고 가장 큰 수로 변경하기 위해서는 다른 방식으로 처리도 가능하다